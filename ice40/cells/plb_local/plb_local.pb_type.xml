<!-- set: ai sw=1 ts=1 sta et -->
<!-- A diagram for the iCE40 PLB "Logic Cell" is shown in;
      http://www.latticesemi.com/~/media/LatticeSemi/Documents/DataSheets/iCE/iCE40LPHXFamilyDataSheet.pdf
      Architecture iCE40 LP/HX Family Data Sheet
       * Figure 2-2. PLB Block Diagram

     It is 8 x (SB_CARRY + SB_LUT4 + FF)
  -->
<pb_type name="BLK_IG-PLB_LOCAL" num_pb="1" xmlns:xi="http://www.w3.org/2001/XInclude">
 <!-- SB_LUT4 inputs -->
 <input  name="I0"     num_pins="4" equivalent="false"/>
 <input  name="I1"     num_pins="4" equivalent="false"/>
 <input  name="I2"     num_pins="4" equivalent="false"/>
 <input  name="I3"     num_pins="4" equivalent="false"/>
 <input  name="I4"     num_pins="4" equivalent="false"/>
 <input  name="I5"     num_pins="4" equivalent="false"/>
 <input  name="I6"     num_pins="4" equivalent="false"/>
 <input  name="I7"     num_pins="4" equivalent="false"/>

 <!-- D flip-flop outputs -->
 <output name="O0"     num_pins="1" equivalent="false"/>
 <output name="O1"     num_pins="1" equivalent="false"/>
 <output name="O2"     num_pins="1" equivalent="false"/>
 <output name="O3"     num_pins="1" equivalent="false"/>
 <output name="O4"     num_pins="1" equivalent="false"/>
 <output name="O5"     num_pins="1" equivalent="false"/>
 <output name="O6"     num_pins="1" equivalent="false"/>
 <output name="O7"     num_pins="1" equivalent="false"/>

 <!-- D flip-flop controls -->
 <clock  name="CLK"    num_pins="1" equivalent="false"/>
 <input  name="EN"     num_pins="1" equivalent="false"/>
 <input  name="SR"     num_pins="1" equivalent="false"/>

 <!-- Fast Carry chain -->
 <input  name="FCIN"   num_pins="1" equivalent="false"/>
 <output name="FCOUT"  num_pins="1" equivalent="false"/>

 <pb_type name="BLK_IG-PLB_CELL" num_pb="8">
  <xi:include href="../plb/plb.pb_type.xml" xpointer="xpointer(pb_type/child::node())"/>
 </pb_type>

 <interconnect>
  <!-- Cell 0 -->
  <direct name="I0[0]" input="BLK_IG-PLB_LOCAL.I0[0]" output="BLK_IG-PLB_CELL[0].I[0]" />
  <direct name="I0[1]" input="BLK_IG-PLB_LOCAL.I0[1]" output="BLK_IG-PLB_CELL[0].I[1]" />
  <direct name="I0[2]" input="BLK_IG-PLB_LOCAL.I0[2]" output="BLK_IG-PLB_CELL[0].I[2]" />
  <direct name="I0[3]" input="BLK_IG-PLB_LOCAL.I0[3]" output="BLK_IG-PLB_CELL[0].I[3]" />
  <direct name="C0"    input="BLK_IG-PLB_LOCAL.CLK"   output="BLK_IG-PLB_CELL[0].CLK"  />
  <direct name="E0"    input="BLK_IG-PLB_LOCAL.EN"    output="BLK_IG-PLB_CELL[0].EN"   />
  <direct name="S0"    input="BLK_IG-PLB_LOCAL.SR"    output="BLK_IG-PLB_CELL[0].SR"   />
  <direct name="O0"    input="BLK_IG-PLB_CELL[0].O"   output="BLK_IG-PLB_LOCAL.O0"     />

  <!-- Cell 1 -->
  <direct name="I1[0]" input="BLK_IG-PLB_LOCAL.I1[0]" output="BLK_IG-PLB_CELL[1].I[0]" />
  <direct name="I1[1]" input="BLK_IG-PLB_LOCAL.I1[1]" output="BLK_IG-PLB_CELL[1].I[1]" />
  <direct name="I1[2]" input="BLK_IG-PLB_LOCAL.I1[2]" output="BLK_IG-PLB_CELL[1].I[2]" />
  <direct name="I1[3]" input="BLK_IG-PLB_LOCAL.I1[3]" output="BLK_IG-PLB_CELL[1].I[3]" />
  <direct name="C1"    input="BLK_IG-PLB_LOCAL.CLK"   output="BLK_IG-PLB_CELL[1].CLK"  />
  <direct name="E1"    input="BLK_IG-PLB_LOCAL.EN"    output="BLK_IG-PLB_CELL[1].EN"   />
  <direct name="S1"    input="BLK_IG-PLB_LOCAL.SR"    output="BLK_IG-PLB_CELL[1].SR"   />
  <direct name="O1"    input="BLK_IG-PLB_CELL[1].O"   output="BLK_IG-PLB_LOCAL.O1"     />

  <!-- Cell 2 -->
  <direct name="I2[0]" input="BLK_IG-PLB_LOCAL.I2[0]" output="BLK_IG-PLB_CELL[2].I[0]" />
  <direct name="I2[1]" input="BLK_IG-PLB_LOCAL.I2[1]" output="BLK_IG-PLB_CELL[2].I[1]" />
  <direct name="I2[2]" input="BLK_IG-PLB_LOCAL.I2[2]" output="BLK_IG-PLB_CELL[2].I[2]" />
  <direct name="I2[3]" input="BLK_IG-PLB_LOCAL.I2[3]" output="BLK_IG-PLB_CELL[2].I[3]" />
  <direct name="C2"    input="BLK_IG-PLB_LOCAL.CLK"   output="BLK_IG-PLB_CELL[2].CLK"  />
  <direct name="E2"    input="BLK_IG-PLB_LOCAL.EN"    output="BLK_IG-PLB_CELL[2].EN"   />
  <direct name="S2"    input="BLK_IG-PLB_LOCAL.SR"    output="BLK_IG-PLB_CELL[2].SR"   />
  <direct name="O2"    input="BLK_IG-PLB_CELL[2].O"   output="BLK_IG-PLB_LOCAL.O2"     />

  <!-- Cell 3 -->
  <direct name="I3[0]" input="BLK_IG-PLB_LOCAL.I3[0]" output="BLK_IG-PLB_CELL[3].I[0]" />
  <direct name="I3[1]" input="BLK_IG-PLB_LOCAL.I3[1]" output="BLK_IG-PLB_CELL[3].I[1]" />
  <direct name="I3[2]" input="BLK_IG-PLB_LOCAL.I3[2]" output="BLK_IG-PLB_CELL[3].I[2]" />
  <direct name="I3[3]" input="BLK_IG-PLB_LOCAL.I3[3]" output="BLK_IG-PLB_CELL[3].I[3]" />
  <direct name="C3"    input="BLK_IG-PLB_LOCAL.CLK"   output="BLK_IG-PLB_CELL[3].CLK"  />
  <direct name="E3"    input="BLK_IG-PLB_LOCAL.EN"    output="BLK_IG-PLB_CELL[3].EN"   />
  <direct name="S3"    input="BLK_IG-PLB_LOCAL.SR"    output="BLK_IG-PLB_CELL[3].SR"   />
  <direct name="O3"    input="BLK_IG-PLB_CELL[3].O"   output="BLK_IG-PLB_LOCAL.O3"     />

  <!-- Cell 4 -->
  <direct name="I4[0]" input="BLK_IG-PLB_LOCAL.I4[0]" output="BLK_IG-PLB_CELL[4].I[0]" />
  <direct name="I4[1]" input="BLK_IG-PLB_LOCAL.I4[1]" output="BLK_IG-PLB_CELL[4].I[1]" />
  <direct name="I4[2]" input="BLK_IG-PLB_LOCAL.I4[2]" output="BLK_IG-PLB_CELL[4].I[2]" />
  <direct name="I4[3]" input="BLK_IG-PLB_LOCAL.I4[3]" output="BLK_IG-PLB_CELL[4].I[3]" />
  <direct name="C4"    input="BLK_IG-PLB_LOCAL.CLK"   output="BLK_IG-PLB_CELL[4].CLK"  />
  <direct name="E4"    input="BLK_IG-PLB_LOCAL.EN"    output="BLK_IG-PLB_CELL[4].EN"   />
  <direct name="S4"    input="BLK_IG-PLB_LOCAL.SR"    output="BLK_IG-PLB_CELL[4].SR"   />
  <direct name="O4"    input="BLK_IG-PLB_CELL[4].O"   output="BLK_IG-PLB_LOCAL.O4"     />

  <!-- Cell 5 -->
  <direct name="I5[0]" input="BLK_IG-PLB_LOCAL.I5[0]" output="BLK_IG-PLB_CELL[5].I[0]" />
  <direct name="I5[1]" input="BLK_IG-PLB_LOCAL.I5[1]" output="BLK_IG-PLB_CELL[5].I[1]" />
  <direct name="I5[2]" input="BLK_IG-PLB_LOCAL.I5[2]" output="BLK_IG-PLB_CELL[5].I[2]" />
  <direct name="I5[3]" input="BLK_IG-PLB_LOCAL.I5[3]" output="BLK_IG-PLB_CELL[5].I[3]" />
  <direct name="C5"    input="BLK_IG-PLB_LOCAL.CLK"   output="BLK_IG-PLB_CELL[5].CLK"  />
  <direct name="E5"    input="BLK_IG-PLB_LOCAL.EN"    output="BLK_IG-PLB_CELL[5].EN"   />
  <direct name="S5"    input="BLK_IG-PLB_LOCAL.SR"    output="BLK_IG-PLB_CELL[5].SR"   />
  <direct name="O5"    input="BLK_IG-PLB_CELL[5].O"   output="BLK_IG-PLB_LOCAL.O5"     />

  <!-- Cell 6 -->
  <direct name="I6[0]" input="BLK_IG-PLB_LOCAL.I6[0]" output="BLK_IG-PLB_CELL[6].I[0]" />
  <direct name="I6[1]" input="BLK_IG-PLB_LOCAL.I6[1]" output="BLK_IG-PLB_CELL[6].I[1]" />
  <direct name="I6[2]" input="BLK_IG-PLB_LOCAL.I6[2]" output="BLK_IG-PLB_CELL[6].I[2]" />
  <direct name="I6[3]" input="BLK_IG-PLB_LOCAL.I6[3]" output="BLK_IG-PLB_CELL[6].I[3]" />
  <direct name="C6"    input="BLK_IG-PLB_LOCAL.CLK"   output="BLK_IG-PLB_CELL[6].CLK"  />
  <direct name="E6"    input="BLK_IG-PLB_LOCAL.EN"    output="BLK_IG-PLB_CELL[6].EN"   />
  <direct name="S6"    input="BLK_IG-PLB_LOCAL.SR"    output="BLK_IG-PLB_CELL[6].SR"   />
  <direct name="O6"    input="BLK_IG-PLB_CELL[6].O"   output="BLK_IG-PLB_LOCAL.O6"     />

  <!-- Cell 7 -->
  <direct name="I7[0]" input="BLK_IG-PLB_LOCAL.I7[0]" output="BLK_IG-PLB_CELL[7].I[0]" />
  <direct name="I7[1]" input="BLK_IG-PLB_LOCAL.I7[1]" output="BLK_IG-PLB_CELL[7].I[1]" />
  <direct name="I7[2]" input="BLK_IG-PLB_LOCAL.I7[2]" output="BLK_IG-PLB_CELL[7].I[2]" />
  <direct name="I7[3]" input="BLK_IG-PLB_LOCAL.I7[3]" output="BLK_IG-PLB_CELL[7].I[3]" />
  <direct name="C7"    input="BLK_IG-PLB_LOCAL.CLK"   output="BLK_IG-PLB_CELL[7].CLK"  />
  <direct name="E7"    input="BLK_IG-PLB_LOCAL.EN"    output="BLK_IG-PLB_CELL[7].EN"   />
  <direct name="S7"    input="BLK_IG-PLB_LOCAL.SR"    output="BLK_IG-PLB_CELL[7].SR"   />
  <direct name="O7"    input="BLK_IG-PLB_CELL[7].O"   output="BLK_IG-PLB_LOCAL.O7"     />

  <!-- LUT carry chain -->
  <!--
  <direct name="LCIN"  input="BLK_IG-PLB_LOCAL.LCIN"    output="BLK_IG-PLB_CELL[0].LCIN" />
    -->
  <direct name="LCC0"  input="BLK_IG-PLB_CELL[0].LCOUT" output="BLK_IG-PLB_CELL[1].LCIN" />
  <direct name="LCC1"  input="BLK_IG-PLB_CELL[1].LCOUT" output="BLK_IG-PLB_CELL[2].LCIN" />
  <direct name="LCC2"  input="BLK_IG-PLB_CELL[2].LCOUT" output="BLK_IG-PLB_CELL[3].LCIN" />
  <direct name="LCC3"  input="BLK_IG-PLB_CELL[3].LCOUT" output="BLK_IG-PLB_CELL[4].LCIN" />
  <direct name="LCC4"  input="BLK_IG-PLB_CELL[4].LCOUT" output="BLK_IG-PLB_CELL[5].LCIN" />
  <direct name="LCC5"  input="BLK_IG-PLB_CELL[5].LCOUT" output="BLK_IG-PLB_CELL[6].LCIN" />
  <direct name="LCC6"  input="BLK_IG-PLB_CELL[6].LCOUT" output="BLK_IG-PLB_CELL[7].LCIN" />
  <!--
  <direct name="LCOUT" input="BLK_IG-PLB_CELL[7].LCOUT" output="BLK_IG-PLB_LOCAL.LCOUT"  />
    -->

  <direct name="FCIN" input="BLK_IG-PLB_LOCAL.FCIN" output="BLK_IG-PLB_CELL[0].FCIN">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-PLB_LOCAL.FCIN" out_port="BLK_IG-PLB_CELL[0].FCIN"/>
  </direct>
  <direct name="FCC0" input="BLK_IG-PLB_CELL[0].FCOUT" output="BLK_IG-PLB_CELL[1].FCIN">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-PLB_CELL[0].FCOUT" out_port="BLK_IG-PLB_CELL[1].FCIN"/>
  </direct>
  <direct name="FCC1" input="BLK_IG-PLB_CELL[1].FCOUT" output="BLK_IG-PLB_CELL[2].FCIN">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-PLB_CELL[1].FCOUT" out_port="BLK_IG-PLB_CELL[2].FCIN"/>
  </direct>
  <direct name="FCC2" input="BLK_IG-PLB_CELL[2].FCOUT" output="BLK_IG-PLB_CELL[3].FCIN">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-PLB_CELL[2].FCOUT" out_port="BLK_IG-PLB_CELL[3].FCIN"/>
  </direct>
  <direct name="FCC3" input="BLK_IG-PLB_CELL[3].FCOUT" output="BLK_IG-PLB_CELL[4].FCIN">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-PLB_CELL[3].FCOUT" out_port="BLK_IG-PLB_CELL[4].FCIN"/>
  </direct>
  <direct name="FCC4" input="BLK_IG-PLB_CELL[4].FCOUT" output="BLK_IG-PLB_CELL[5].FCIN">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-PLB_CELL[4].FCOUT" out_port="BLK_IG-PLB_CELL[5].FCIN"/>
  </direct>
  <direct name="FCC5" input="BLK_IG-PLB_CELL[5].FCOUT" output="BLK_IG-PLB_CELL[6].FCIN">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-PLB_CELL[5].FCOUT" out_port="BLK_IG-PLB_CELL[6].FCIN"/>
  </direct>
  <direct name="FCC6" input="BLK_IG-PLB_CELL[6].FCOUT" output="BLK_IG-PLB_CELL[7].FCIN">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-PLB_CELL[6].FCOUT" out_port="BLK_IG-PLB_CELL[7].FCIN"/>
  </direct>
  <direct name="FCOUT" input="BLK_IG-PLB_CELL[7].FCOUT" output="BLK_IG-PLB_LOCAL.FCOUT">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-PLB_CELL[7].FCOUT" out_port="BLK_IG-PLB_LOCAL.FCOUT"/>
  </direct>
  <!-- Fast carry chain
  <direct name="FCIN" input="BLK_IG-PLB_LOCAL.FCIN" output="BLK_IG-PLB_CELL[0].FCIN" />
  <direct name="FCC0" input="BLK_IG-PLB_CELL[0].FCOUT" output="BLK_IG-PLB_CELL[1].FCIN" />
  <direct name="FCC1" input="BLK_IG-PLB_CELL[1].FCOUT" output="BLK_IG-PLB_CELL[2].FCIN" />
  <direct name="FCC2" input="BLK_IG-PLB_CELL[2].FCOUT" output="BLK_IG-PLB_CELL[3].FCIN" />
  <direct name="FCC3" input="BLK_IG-PLB_CELL[3].FCOUT" output="BLK_IG-PLB_CELL[4].FCIN" />
  <direct name="FCC4" input="BLK_IG-PLB_CELL[4].FCOUT" output="BLK_IG-PLB_CELL[5].FCIN" />
  <direct name="FCC5" input="BLK_IG-PLB_CELL[5].FCOUT" output="BLK_IG-PLB_CELL[6].FCIN" />
  <direct name="FCC6" input="BLK_IG-PLB_CELL[6].FCOUT" output="BLK_IG-PLB_CELL[7].FCIN" />
  <direct name="FCOUT" input="BLK_IG-PLB_CELL[7].FCOUT" output="BLK_IG-PLB_LOCAL.FCOUT" />
       -->

 </interconnect>

</pb_type>
